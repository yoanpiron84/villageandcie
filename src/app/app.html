<!-- Sidebar -->
<nav class="sidebar">
  <div class="logo">
    <img src="images/site-logo.png" alt="Logo" class="site-logo"/>
  </div>

  <!-- ✅ Sélecteur de langue intégré à la sidebar -->
  <div class="language-switcher">
    <button class="toggle-lang-btn" (click)="toggleLanguageMenu()">
      <img [src]="'/images/flags/' + currentLanguage + '.png'"
           [alt]="currentLanguage"
           class="flag-icon">
    </button>

    @if (showLanguageMenu){
      <div class="language-menu-card">
        <div class="language-option" (click)="changeLanguage('fr')">
          <img src="/images/flags/fr.png" alt="Français" class="flag-icon">
          <span>Français</span>
        </div>
        <div class="language-option" (click)="changeLanguage('en')">
          <img src="/images/flags/en.png" alt="English" class="flag-icon">
          <span>English</span>
        </div>
        <div class="language-option" (click)="changeLanguage('es')">
          <img src="/images/flags/es.png" alt="Español" class="flag-icon">
          <span>Español</span>
        </div>
      </div>
    }
  </div>

  <div class="menu-toggle" (click)="toggleMenu()">&#9776;</div>

  <ul class="sidebar-menu" [class.active]="menuActive">
    <li>
      <a id="home-btn" (click)="toggleHome()" title="Home">
        <i class="fa fa-home menu-icon"></i>
        <span class="menu-text home-text"> Accueil</span>
      </a>
    </li>
    <li>
      <a id="map-btn" (click)="toggleMap()" title="Carte">
        <i class="fa fa-map menu-icon"></i>
        <span class="menu-text map-text"> Carte</span>
      </a>
    </li>
    <li>
      <a id="chat-btn" (click)="toggleChat()" title="Chat IA">
        <i class="fa fa-comments menu-icon"></i>
        <span class="menu-text chat-text"> Chat IA</span>
      </a>
    </li>
  </ul>
</nav>


<!-- Main Content -->
<div class="main-content" [class.full-screen-map]="showMap">
  @if (!showMap){
    <header id="home" class="header-section">

      <h1 class="title">
        <span class="hide-small">Bienvenue sur</span> Village&Cie
      </h1>
      <p class="subtitle">Découvrez des villages et lieux près de vous.</p><br><br>
      <div class="carousel-container">
        <div class="carousel-track" [style.transform]="'translateX(-' + currentSlide * 100 + '%)'" >
          @for (slide of slides; track slide.text){
            <div class="carousel-item">
              <img [src]="slide.image" alt="Slide">
              <div class="carousel-caption">{{slide.text}}</div>
            </div>
          }
        </div>

        <!-- Boutons navigation -->
        <button class="carousel-btn prev" (click)="prevSlide(true)">&#10094;</button>
        <button class="carousel-btn next" (click)="nextSlide(true)">&#10095;</button>
      </div>
    </header>
  }

  @if (showMap){
    <app-map #mapRef [translations]="translations" [currentLanguage]="currentLanguage" [showMap]="showMap"></app-map>
  }
</div>

<!-- Chat Flottant -->
@if (showChat){
  <app-voice [mapComponent]="mapRef" [translations]="translations" [currentLanguage]="currentLanguage"></app-voice>
}
